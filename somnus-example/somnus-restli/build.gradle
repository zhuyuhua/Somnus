apply from: 'libs.gradle'

group = 'com.somnus.example.restli'
version = '1.0-SNAPSHOT'

allprojects {

    apply plugin: 	'java'
    apply plugin: 	'idea'
    apply plugin: 	'maven'
	apply plugin: 	'eclipse' 
	apply plugin: 	'jetty'
  
	sourceCompatibility = '1.8'
    targetCompatibility = '1.8'
	
	
    repositories {
        maven { url 'http://localhost:8082/nexus/content/groups/public' }
        mavenCentral()
    }
	
	 eclipse {
        classpath {
            downloadSources=true
        }
    }
	
	configurations {
        provided {            
            description = 'Non-exported compile-time dependencies.'
        }
        configurations {
            all*.exclude group: 'commons-logging', module: 'commons-logging'
		}	
    }
	
    sourceSets.main.compileClasspath += configurations.provided
    eclipse.classpath.plusConfigurations += configurations.provided
	
    dependencies {
       // testCompile lib.junit
    }
	
	sourceSets.main.resources {
        if (project.hasProperty('profile')) {
            srcDir 'src/main/resources-' + project.profile
            srcDir 'src/test/resources-' + project.profile
        }
    }
	
	tasks.withType(JavaCompile) { options.encoding = 'UTF-8' }

    eclipseProject.doLast {
        if (!new File("$projectDir/src").exists() && !new File("$projectDir/gen-java").exists()) {
            ant.delete dir: '.settings'
            ant.delete file: '.project'
            ant.delete file: '.classpath'
        }
    }
	
	[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'
}

buildscript {
	repositories {
		maven { url 'http://localhost:8082/nexus/content/groups/public' }
		mavenCentral()
	}
	dependencies {
		classpath 'com.linkedin.pegasus:gradle-plugins:2.6.0'
	}
}

